{"ast":null,"code":"import axios from 'axios'; // ACTION TYPES;\n\nconst LOG_IN = \"LOG_IN\";\nconst LOG_OUT = \"LOG_OUT\";\nconst ERROR = \"ERROR\"; // ACTION CREATOR;\n\nconst logIn = user => {\n  return {\n    type: LOG_IN,\n    payload: user\n  };\n};\n\nconst logOut = () => {\n  return {\n    type: LOG_OUT\n  };\n};\n\nconst error = err => {\n  return {\n    type: ERROR,\n    payload: err\n  };\n}; // Thunks go here!\n\n\nexport const logInThunk = user => async dispatch => {\n  let res;\n\n  try {\n    console.log(user);\n    res = await axios.post(\"https://vpay-backend-auth.herokuapp.com/auth/login\", {\n      \"username\": user.username,\n      \"password\": user.password\n    }, {\n      withCredentials: true\n    });\n  } catch (authError) {\n    return dispatch(error(authError));\n  }\n\n  try {\n    console.log(res.data, \"THIS IS OUR INITIAL DATA\");\n    dispatch(logIn(res.data));\n  } catch (dispatchOrHistoryErr) {\n    console.error(dispatchOrHistoryErr);\n  }\n};\nexport const me = () => async dispatch => {\n  try {\n    console.log('auth');\n    const res = await axios.get(\"https://vpay-backend-auth.herokuapp.com/auth/me\", {\n      withCredentials: true\n    });\n    dispatch(logIn(res.data || {}));\n  } catch (err) {\n    console.error(err);\n  }\n};\nexport const logOutThunk = () => async dispatch => {\n  try {\n    await axios.delete('https://vpay-backend-auth.herokuapp.com/auth/logout', {\n      withCredentials: true\n    });\n    dispatch(logOut());\n  } catch (err) {\n    console.error(err);\n  }\n}; // REDUCER FUNCTION;\n\nexport default ((state = {}, action) => {\n  switch (action.type) {\n    case LOG_IN:\n      return action.payload;\n\n    case LOG_OUT:\n      return {};\n\n    case ERROR:\n      return action.payload;\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/admin/Desktop/vpaynew/client/src/store/utilities/loggeduser.js"],"names":["axios","LOG_IN","LOG_OUT","ERROR","logIn","user","type","payload","logOut","error","err","logInThunk","dispatch","res","console","log","post","username","password","withCredentials","authError","data","dispatchOrHistoryErr","me","get","logOutThunk","delete","state","action"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,MAAMC,MAAM,GAAG,QAAf;AACA,MAAMC,OAAO,GAAG,SAAhB;AACA,MAAMC,KAAK,GAAG,OAAd,C,CAEA;;AACA,MAAMC,KAAK,GAAIC,IAAD,IAAU;AACpB,SAAO;AACHC,IAAAA,IAAI,EAAEL,MADH;AAEHM,IAAAA,OAAO,EAAEF;AAFN,GAAP;AAIH,CALD;;AAMA,MAAMG,MAAM,GAAG,MAAM;AACjB,SAAO;AACHF,IAAAA,IAAI,EAAEJ;AADH,GAAP;AAGH,CAJD;;AAMA,MAAMO,KAAK,GAAIC,GAAD,IAAS;AACnB,SAAO;AACHJ,IAAAA,IAAI,EAAEH,KADH;AAEHI,IAAAA,OAAO,EAAEG;AAFN,GAAP;AAIH,CALD,C,CAMA;;;AACA,OAAO,MAAMC,UAAU,GAAIN,IAAD,IAAU,MAAOO,QAAP,IAAoB;AACpD,MAAIC,GAAJ;;AACA,MAAI;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYV,IAAZ;AACAQ,IAAAA,GAAG,GAAG,MAAMb,KAAK,CAACgB,IAAN,uDAAiE;AACzE,kBAAYX,IAAI,CAACY,QADwD;AAEzE,kBAAYZ,IAAI,CAACa;AAFwD,KAAjE,EAGT;AAAEC,MAAAA,eAAe,EAAE;AAAnB,KAHS,CAAZ;AAIH,GAND,CAOA,OAAOC,SAAP,EAAkB;AACd,WAAOR,QAAQ,CAACH,KAAK,CAACW,SAAD,CAAN,CAAf;AACH;;AAED,MAAI;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACQ,IAAhB,EAAsB,0BAAtB;AACAT,IAAAA,QAAQ,CAACR,KAAK,CAACS,GAAG,CAACQ,IAAL,CAAN,CAAR;AACH,GAHD,CAIA,OAAOC,oBAAP,EAA6B;AACzBR,IAAAA,OAAO,CAACL,KAAR,CAAca,oBAAd;AACH;AACJ,CApBM;AAsBP,OAAO,MAAMC,EAAE,GAAG,MAAM,MAAMX,QAAN,IAAkB;AACtC,MAAI;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,UAAMF,GAAG,GAAG,MAAMb,KAAK,CAACwB,GAAN,oDAA6D;AAAEL,MAAAA,eAAe,EAAE;AAAnB,KAA7D,CAAlB;AACAP,IAAAA,QAAQ,CAACR,KAAK,CAACS,GAAG,CAACQ,IAAJ,IAAY,EAAb,CAAN,CAAR;AACH,GAJD,CAKA,OAAOX,GAAP,EAAY;AACRI,IAAAA,OAAO,CAACL,KAAR,CAAcC,GAAd;AACH;AACJ,CATM;AAUP,OAAO,MAAMe,WAAW,GAAG,MAAM,MAAOb,QAAP,IAAoB;AACjD,MAAI;AAEA,UAAMZ,KAAK,CAAC0B,MAAN,CAAa,qDAAb,EAAoE;AAAEP,MAAAA,eAAe,EAAE;AAAnB,KAApE,CAAN;AACAP,IAAAA,QAAQ,CAACJ,MAAM,EAAP,CAAR;AACH,GAJD,CAKA,OAAOE,GAAP,EAAY;AACRI,IAAAA,OAAO,CAACL,KAAR,CAAcC,GAAd;AACH;AACJ,CATM,C,CAWP;;AACA,gBAAe,CAACiB,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AACnC,UAAQA,MAAM,CAACtB,IAAf;AACI,SAAKL,MAAL;AACI,aAAO2B,MAAM,CAACrB,OAAd;;AACJ,SAAKL,OAAL;AACI,aAAO,EAAP;;AACJ,SAAKC,KAAL;AACI,aAAOyB,MAAM,CAACrB,OAAd;;AACJ;AACI,aAAOoB,KAAP;AARR;AAUH,CAXD","sourcesContent":["import axios from 'axios';\n// ACTION TYPES;\nconst LOG_IN = \"LOG_IN\";\nconst LOG_OUT = \"LOG_OUT\";\nconst ERROR = \"ERROR\";\n\n// ACTION CREATOR;\nconst logIn = (user) => {\n    return {\n        type: LOG_IN,\n        payload: user\n    }\n}\nconst logOut = () => {\n    return {\n        type: LOG_OUT,\n    }\n}\n\nconst error = (err) => {\n    return {\n        type: ERROR,\n        payload: err\n    }\n}\n// Thunks go here!\nexport const logInThunk = (user) => async (dispatch) => {\n    let res;\n    try {\n        console.log(user);\n        res = await axios.post(`https://vpay-backend-auth.herokuapp.com/auth/login`, {\n            \"username\": user.username,\n            \"password\": user.password\n        }, { withCredentials: true })\n    }\n    catch (authError) {\n        return dispatch(error(authError));\n    }\n\n    try {\n        console.log(res.data, \"THIS IS OUR INITIAL DATA\");\n        dispatch(logIn(res.data));\n    }\n    catch (dispatchOrHistoryErr) {\n        console.error(dispatchOrHistoryErr)\n    }\n}\n\nexport const me = () => async dispatch => {\n    try {\n        console.log('auth')\n        const res = await axios.get(`https://vpay-backend-auth.herokuapp.com/auth/me`, { withCredentials: true });\n        dispatch(logIn(res.data || {}));\n    }\n    catch (err) {\n        console.error(err);\n    }\n}\nexport const logOutThunk = () => async (dispatch) => {\n    try {\n\n        await axios.delete('https://vpay-backend-auth.herokuapp.com/auth/logout', { withCredentials: true });\n        dispatch(logOut());\n    }\n    catch (err) {\n        console.error(err);\n    }\n}\n\n// REDUCER FUNCTION;\nexport default (state = {}, action) => {\n    switch (action.type) {\n        case LOG_IN:\n            return action.payload;\n        case LOG_OUT:\n            return {};\n        case ERROR:\n            return action.payload;\n        default:\n            return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}