(window.webpackJsonpvpayapp=window.webpackJsonpvpayapp||[]).push([[0],{31:function(e,t,a){},40:function(e,t,a){},44:function(e,t,a){e.exports=a.p+"static/media/vpayLogov1.2cade39d.png"},50:function(e,t,a){e.exports=a(90)},55:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(20),o=a.n(s),l=(a(55),a(31),a(3)),c=a(4),i=a(7),u=a(5),p=a(6),m=a(9),d=a(18),h=a(24),E=a(1),g=a.n(E),f=a(8),b=a(10),v=a.n(b),N=function(e){return{type:"REGISTER_ERROR",payload:e}},y=function(e){return{type:"REGISTER_USER",payload:e}},O=function(e){return{type:"LOG_IN",payload:e}},w=function(e){return{type:"FETCH_ORDERS_DATA",payload:e}},R=(a(78),a(40),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={receipts:[],allorders:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({receipts:this.props.loggeduser.receipts})}},{key:"render",value:function(){var e=this;return n.a.createElement("table",{className:"ReceiptTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",null),n.a.createElement("td",null,"ID"),n.a.createElement("td",null,"Total"),n.a.createElement("td",null,"Tip Percent"),n.a.createElement("td",null,"Orders"),n.a.createElement("td",null))),n.a.createElement("tbody",null,this.state.receipts?this.state.receipts.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",{className:"cView"},n.a.createElement("button",{onClick:function(){return e.props.fetchOrdersData(t.orders)},className:"bView"},"View")),n.a.createElement("td",null,t.id),n.a.createElement("td",null,"$",t.totalPrice),n.a.createElement("td",null,t.tipPercent,"%"),n.a.createElement("td",null,t.orders.length," Orders"),n.a.createElement("td",{className:"cDel"},n.a.createElement("button",{className:"bDel",onClick:function(){return e.props.resetOrdersData()}},"Hide")),console.log(t,"each one"))}):"",n.a.createElement("tr",null)))}}]),t}(r.Component)),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={orders:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({orders:this.props.orders})}},{key:"render",value:function(){return n.a.createElement("table",{className:"ReceiptTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",null,"ID"),n.a.createElement("td",null,"Item Name"),n.a.createElement("td",null,"Price"),n.a.createElement("td",null,"Paid"),n.a.createElement("td",null,"Owner"))),n.a.createElement("tbody",null,this.state.orders[0]?this.state.orders.map(function(e){return n.a.createElement("tr",{key:e.id},n.a.createElement("td",null,e.id),n.a.createElement("td",null,e.itemName),n.a.createElement("td",null,"$",e.price),n.a.createElement("td",null,e.paid?"Yes":"No"),n.a.createElement("td",null,e.user.username),console.log(e,"each one"))}):"",n.a.createElement("tr",null)))}}]),t}(r.Component),C=(a(79),a(80),a(42)),x=a.n(C),j=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("The payment was succeeded!",a),t.next=3,v()({method:"put",url:"https://vpay-backend-auth.herokuapp.com/api/users/balance",data:{username:e.props.username,balance:e.props.balance+e.props.amount}});case 3:return t.next=5,v()({method:"put",url:"https://vpay-backend-auth.herokuapp.com/api/orders/"+e.props.id,data:{username:e.props.username,paid:!0}});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a=this.props.amount;return n.a.createElement(x.a,{env:"sandbox",client:{sandbox:"AYc_WD_FqZRhsF9vpUmXank8pwsAMS9Xjz3y89LeJ3kXQ_f5jumCjCIKnvYafaGZ0QOHYVs9GeY-M7cF",production:"YOUR-PRODUCTION-APP-ID"},currency:"USD",total:a,onError:function(e){console.log("Error!",e)},onSuccess:t,onCancel:function(e){console.log("The payment was cancelled!",e)},shipping:1})}}]),t}(n.a.Component),S=a(43),k=a.n(S),D=(n.a.Component,r.Component,function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={orders:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({orders:this.props.loggeduser.orders,username:this.props.loggeduser.username,balance:this.props.loggeduser.balance})}},{key:"render",value:function(){var e=this;return console.log(this.state.orders),n.a.createElement("table",{className:"ReceiptTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Item ID"),n.a.createElement("td",null,"Item Name"),n.a.createElement("td",null,"Price"),n.a.createElement("td",null,"Receipt ID"),n.a.createElement("td",null))),n.a.createElement("tbody",null,this.state.orders?this.state.orders.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.itemName),n.a.createElement("td",null,"$",t.price),n.a.createElement("td",null,t.receiptId),n.a.createElement("td",null,t.paid?"Paid!":n.a.createElement(j,{id:t.id,username:t.receipt.user.username,balance:e.state.balance,amount:t.price})))}):"",n.a.createElement("tr",null)))}}]),t}(r.Component)),P=a(44),I=a.n(P),F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChangeHandler=function(e){a.setState({selectedFile:e.target.files[0]}),console.log(e.target.files[0])},a.logout=function(){console.log("logout"),a.props.logOut(),a.props.me(),a.props.history.push("/")},a.displayorder=function(e){a.setState({tlbox:e})},a.state={selectedFile:null,tlbox:[],amount:a.props.loggeduser.balance,email:a.props.loggeduser.email,username:a.props.loggeduser.username},console.log(a.props.loggeduser),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.resetReceiptData(),this.props.resetOrdersData()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container-fluid"},n.a.createElement("nav",{className:"navbar navbar-fixed-top"},n.a.createElement("img",{className:"logoImg",src:I.a,alt:"logo"}),n.a.createElement(m.b,{className:"btn btn-danger",to:"/",onClick:this.logout},"Log out")),n.a.createElement("div",{className:"row"},this.props.orders[0]?n.a.createElement("div",{className:"colTR"},n.a.createElement("div",{className:"TopRow"},n.a.createElement("h1",{className:"headingLabel"},"Orders of Receipt ",this.props.orders[0].receiptId)),n.a.createElement("div",{className:"TopRowTX"},n.a.createElement("div",{className:"receiptHistory"},n.a.createElement(T,{orders:this.props.orders})))):n.a.createElement("div",{className:"colTL"},n.a.createElement("div",{className:"TopRow"},n.a.createElement("table",{className:"welcomeTable"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:"welcomeTableText"},n.a.createElement("h1",null,"Nice day for some food, ",this.props.loggeduser.firstName,"!"),"Through this website, you'll be able to assign the orders that your friend/family/enemy made with YOUR money. Have them pay you back so you can call it even! You have $",this.props.loggeduser.balance," in your balance"),n.a.createElement("td",null)),n.a.createElement("tr",{className:"OrdersInfo"},this.state.tlbox),n.a.createElement("tr",null,n.a.createElement("div",null,console.log(this.props),0==this.props.loggeduser.balance?"":n.a.createElement("form",{action:"/pay/"+this.state.amount+"/"+this.state.email+"/"+this.props.loggeduser.username,method:"post"},n.a.createElement("input",{className:"cView",type:"submit",value:"Cash out"})))))))),n.a.createElement("div",{className:"colTR"},n.a.createElement("div",{className:"TopRow"},n.a.createElement("h1",{className:"headingLabel"},"Receipt History")),n.a.createElement("div",{className:"TopRowTX"},n.a.createElement("div",{className:"receiptHistory"},n.a.createElement(R,{displayorder:this.displayorder,loggeduser:this.props.loggeduser,fetchOrdersData:this.props.fetchOrdersData,resetOrdersData:this.props.resetOrdersData}))))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"colBL"},n.a.createElement("div",{className:"TopRow"},n.a.createElement("h1",{className:"headingLabel"},"Upload A Receipt")),n.a.createElement("div",{className:"TopRowT"},n.a.createElement("form",{method:"post",action:"#",id:"#",className:"upload-form"},n.a.createElement("div",{className:"form-group files"},n.a.createElement("input",{type:"file",className:"form-control",name:"file",onChange:this.onChangeHandler,multiple:""})),n.a.createElement("center",null,n.a.createElement("button",{type:"button",className:"uploadButton",onClick:function(){return e.props.fetchReceiptData(e.state.selectedFile)}},"Upload"),this.props.data.amounts?n.a.createElement(m.b,{to:"/orders"},n.a.createElement("button",{className:"toOrdersButtonS"},"Proceed")):n.a.createElement("button",{className:"toOrdersButtonB"},"No Orders"))))),n.a.createElement("div",{className:"colBR"},n.a.createElement("div",{className:"TopRow"},n.a.createElement("h1",{className:"headingLabel"},"Order History")),n.a.createElement("div",{className:"TopRowTX"},n.a.createElement("div",{className:"receiptHistory"},n.a.createElement(D,{loggeduser:this.props.loggeduser}))))))}}]),t}(r.Component),U=Object(d.f)(F),L=(a(86),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChangePassword=function(e){a.setState({password:e.target.value})},a.handleChangeUsername=function(e){a.setState({username:e.target.value})},a.handleSubmit=function(){var e=Object(f.a)(g.a.mark(function e(t){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:a.state.username,password:a.state.password},e.next=4,a.props.logIn(r);case 4:a.props.isLoggedIn&&a.props.history.push("/home");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={password:"",username:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"showPass",value:function(){var e=document.getElementById("password");"password"===e.type?e.type="text":e.type="password"}},{key:"render",value:function(){return n.a.createElement("div",{className:"LogInPage"},n.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},n.a.createElement("table",{className:"LogInTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2},n.a.createElement("h1",{className:"LogInTitle"},"Welcome")))),this.props.isLoggedIn?n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Successfully Logged in!")),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(m.b,{to:"/home"},"Go to Home")))):n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"Username:"),n.a.createElement("td",{className:"inputField"},n.a.createElement("input",{type:"text",className:"Username",onChange:this.handleChangeUsername}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"Password:"),n.a.createElement("td",{className:"inputField"},n.a.createElement("input",{type:"password",className:"Password",id:"password",onChange:this.handleChangePassword}))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2,className:"showPassword"},n.a.createElement("input",{type:"checkbox",className:"showPassCheck",id:"show-password",onClick:this.showPass}),n.a.createElement("label",{htmlFor:"show-password"},"Show Password"))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2,className:"ErrorDisplay"},this.props.error?this.props.error.data:"")),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2},n.a.createElement("button",{className:"LoginButton"},"Login"))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2,className:"RegisterLink"},"Don't have an account? ",n.a.createElement(m.b,{to:"/register"},"Register")))))))}}]),t}(r.Component)),A=Object(d.f)(L),_=(a(87),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChangeFirstName=function(e){a.setState({firstName:e.target.value})},a.handleChangeLastName=function(e){a.setState({lastName:e.target.value})},a.handleChangePassword=function(e){a.setState({password:e.target.value})},a.handleChangeUsername=function(e){a.setState({username:e.target.value})},a.handleChangePhone=function(e){a.setState({phoneNumber:e.target.value})},a.handleChangeEmail=function(e){a.setState({email:e.target.value})},a.handleSubmit=function(){var e=Object(f.a)(g.a.mark(function e(t){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={firstName:a.state.firstName,lastName:a.state.lastName,password:a.state.password,username:a.state.username,phoneNumber:a.state.phoneNumber,email:a.state.email},e.next=4,a.props.registerUser(r);case 4:"User Successfully Registered!"===a.props.registerSuccess&&a.props.history.push("/login");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={firstName:"",lastName:"",password:"",username:"",phoneNumber:NaN,email:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"showPass",value:function(){var e=document.getElementById("password");"password"===e.type?e.type="text":e.type="password"}},{key:"render",value:function(){return n.a.createElement("div",{className:"registerPage"},n.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},n.a.createElement("table",{className:"registerTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2},n.a.createElement("h1",{className:"registerTitle"},"Sign Up")))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"Username:"),n.a.createElement("td",{className:"inputFieldR"},n.a.createElement("input",{type:"text",className:"Username",onChange:this.handleChangeUsername}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"Password:"),n.a.createElement("td",{className:"inputFieldR"},n.a.createElement("input",{type:"password",className:"Password",id:"password",onChange:this.handleChangePassword}))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2,className:"showPassword"},n.a.createElement("input",{type:"checkbox",className:"showPassCheck",id:"show-password",onClick:this.showPass}),n.a.createElement("label",{for:"show-password"},"Show Password"))),n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"First Name:"),n.a.createElement("td",{className:"inputFieldR"},n.a.createElement("input",{type:"text",className:"firstName",onChange:this.handleChangeFirstName}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"Last Name:"),n.a.createElement("td",{className:"inputFieldR"},n.a.createElement("input",{type:"text",className:"lastName",onChange:this.handleChangeLastName}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"Phone Number:"),n.a.createElement("td",{className:"inputFieldR"},n.a.createElement("input",{type:"number",className:"phoneNumber",onChange:this.handleChangePhone}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"TextField"},"Email:"),n.a.createElement("td",{className:"inputFieldR"},n.a.createElement("input",{type:"text",className:"email",onChange:this.handleChangeEmail}))),n.a.createElement("tr",null,this.props.registerSuccess?n.a.createElement("td",{colSpan:2,className:"successMessage"},this.props.registerSuccess):"",this.props.registerError?n.a.createElement("td",{colSpan:2,className:"errorMessage"},this.props.registerError.data):""),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2},n.a.createElement("button",{className:"registerButton"},"Register"))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:2},n.a.createElement(m.b,{className:"cancelButton",to:"/"},"Cancel"))),n.a.createElement("tr",null)))))}}]),t}(r.Component)),H=Object(d.f)(_),B=a(46);a(88);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onDragOver=function(e){e.preventDefault()},a.onDragStart=function(e,t){console.log("dragstart: ",t),e.dataTransfer.setData("id",t)},a.onDrop=function(e,t){var r=e.dataTransfer.getData("id");console.log(r,"look jjjjjj");var n=a.state.orders.filter(function(e){return console.log(e.orderid,r,"look"),parseInt(e.orderid)===parseInt(r)&&(e.category=t),e});a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach(function(t){Object(B.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a.state,{orders:n}))},a.handleConfirm=function(e){console.log("RUNNNNNING"),a.setState({confirm:!0})},a.handleCancel=function(e){a.setState({confirm:!1})},a.handleSubmit=function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://vpay-backend-auth.herokuapp.com/api/users/".concat(a.state.username)).then(function(e){console.log(e.data,"HERERERE");var t=a.state.groups;t[e.data.username]={name:e.data.username+"'s Orders",id:e.data.id,theirOrders:[],totalCost:0},a.setState({groups:t,currentuser:e.data,errortext:""})}).catch(function(e){404===e.response.status&&a.setState({errortext:"User not found! Did you spell it correctly?"})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleFinalize=function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("https://vpay-backend-auth.herokuapp.com/api/receipts",{userId:a.props.loggeduser.id,totalPrice:parseInt(((a.state.totalReceiptCost-a.state.totalReceiptTax)*(a.state.tipPercent/100)+a.state.totalReceiptCost).toFixed(2)),tipPercent:parseInt(a.state.tipPercent)}).then(function(e){console.log(e);var t=e.data;Object.keys(a.state.groups).map(function(e,r){a.state.groups[e].id===a.props.loggeduser.id?a.state.groups[e].theirOrders.map(function(){var r=Object(f.a)(g.a.mark(function r(n){return g.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("userId",a.state.groups[e].id,"receiptId",t,"paid",!0,"itemName",n.props.id,"price ",n.props.cost*(a.state.tipPercent/100)+n.props.cost+n.props.cost*(a.state.totalReceiptTax/(a.state.totalReceiptCost-a.state.totalReceiptTax))),r.next=3,v.a.post("https://vpay-backend-auth.herokuapp.com/api/orders",{userId:a.state.groups[e].id,receiptId:t,paid:!0,itemName:n.props.id,price:parseFloat((n.props.cost*(a.state.tipPercent/100)+n.props.cost+n.props.cost*(a.state.totalReceiptTax/(a.state.totalReceiptCost-a.state.totalReceiptTax))).toFixed(2))}).then(function(e){console.log(e,"WENT THROUGH SUCCESFULLLLLLLY")}).catch(function(e){console.log(e.response)});case 3:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()):a.state.groups[e].id&&a.state.groups[e].theirOrders.map(function(){var r=Object(f.a)(g.a.mark(function r(n){return g.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.post("https://vpay-backend-auth.herokuapp.com/api/orders",{userId:a.state.groups[e].id,receiptId:t,paid:!1,itemName:n.props.id,price:parseFloat((n.props.cost*(a.state.tipPercent/100)+n.props.cost+n.props.cost*(a.state.totalReceiptTax/(a.state.totalReceiptCost-a.state.totalReceiptTax))).toFixed(2))}).then(function(e){console.log(e)}).catch(function(e){console.log(e.response)});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}())})}).catch(function(e){console.log(e.response)});case 2:a.state.confirm&&a.props.history.push("/home");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChangeUsername=function(e){a.setState({username:e.target.value})},a.handleChangeTip=function(e){a.setState({tipPercentChange:e.target.value})},a.handleTip=function(e){e.preventDefault(),a.setState({tipPercent:a.state.tipPercentChange})},a.state={orders:[],groups:{allorders:{name:"All Orders",theirOrders:[]},trash:{name:"Trash",theirOrders:[]}},totalReceiptCost:0,totalReceiptTax:0,username:"",errortext:"",numberOrders:0,tipPercentChange:0,tipPercent:0,confirm:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"parse",value:function(e,t,a){console.log(e,"The order has a frequency of",t);for(var r=a/t,n=0,s=this.state.orders;n<t;)console.log("THE FREQUENCY IS: ",t," THE STEP IS: ",n),s.push({name:e,category:"allorders",cost:r,orderid:this.state.numberOrders}),this.state.numberOrders=this.state.numberOrders+1,n+=1,console.log("THE FREQUENCY IS: ",t," THE STEP BECAME: ",n);this.setState(s)}},{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark(function e(){var t,a=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.data.totalAmount&&this.setState({totalReceiptCost:this.props.data.totalAmount.data,totalReceiptTax:this.props.data.taxAmount.data}),(t=this.state.groups)[this.props.loggeduser.username]={name:this.props.loggeduser.username+"'s Orders",id:this.props.loggeduser.id,theirOrders:[],totalCost:0},this.setState({groups:t}),!this.props.data.amounts){e.next=7;break}return e.next=7,this.props.data.amounts.map(function(e){if(console.log(e),e.text[0]<="9"&&e.text[0]>="0"){for(var t=1;e.text[t]<="9"&&e.text[t]>="0";)t++;var r=e.text.substring(0,t);console.log(r,"NEAT!");var n=parseInt(r,10);a.parse(e.text.substring(t,e.text.length-1),n,e.data)}else a.parse(e.text,1,e.data)});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object.keys(this.state.groups).map(function(t,a){e.state.groups[t].theirOrders=[],void 0!==e.state.groups[t].totalCost&&(e.state.groups[t].totalCost=0)}),this.state.orders.map(function(t){void 0!==e.state.groups[t.category].totalCost&&(e.state.groups[t.category].totalCost+=t.cost),e.state.groups[t.category].theirOrders.push(n.a.createElement("div",{key:t.orderid,id:t.name,cost:t.cost,onDragStart:function(a){return e.onDragStart(a,t.orderid)},draggable:!0,className:"draggable"},n.a.createElement("table",{className:"itemRow"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:"itemName"},t.name),n.a.createElement("td",{className:"itemCost"},"$",t.cost))))))}),n.a.createElement("div",{className:"mainPage "},n.a.createElement("nav",{className:"navbar navbar-fixed-top"},n.a.createElement("h1",{className:"header"},"Rearrange Your Orders"),n.a.createElement("div",{className:"ml-auto"},this.state.confirm?n.a.createElement("div",null,"Are you sure you want to finalize these orders? ",n.a.createElement("button",{className:"final",onClick:this.handleFinalize},"Yes"),n.a.createElement("button",{className:"finalno",onClick:this.handleCancel},"No")):n.a.createElement("div",null,n.a.createElement("button",{className:"finalize btn btn-danger",onClick:this.handleConfirm},"Finalize"),n.a.createElement(m.b,{className:"btn btn-danger",to:"/home"},"Cancel")))),n.a.createElement("div",null,n.a.createElement("table",{className:"topPageTable"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"receiptHead"},n.a.createElement("td",{className:"headText"},"Total Cost: ",this.state.totalReceiptCost," +($",(this.state.totalReceiptCost*(this.state.tipPercent/100)).toFixed(2)," Tips)"),n.a.createElement("td",{className:"headText"},"Current Tip Percent: ",this.state.tipPercent,"% "))))),n.a.createElement("div",{className:"botLeftCon d-flex flex-row"},n.a.createElement("div",{className:"botLeftFunc d-flex flex-fill flex-column"},n.a.createElement("div",{className:"align-self-center"},n.a.createElement("tr",null,n.a.createElement("td",{className:"firstField"},n.a.createElement("label",{htmlFor:"Username"},"Add User: ")),n.a.createElement("td",{className:"firstField"},n.a.createElement("input",{type:"text",className:"Username",onChange:this.handleChangeUsername})),n.a.createElement("td",{className:"firstField"},n.a.createElement("button",{onClick:this.handleSubmit},"Add"))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:3},this.state.errortext)),n.a.createElement("tr",null,n.a.createElement("td",{className:"firstField"},n.a.createElement("label",{htmlFor:"Username"},"Tip Percent: ")),n.a.createElement("td",{className:"firstField"},n.a.createElement("input",{type:"number",className:"Username",onChange:this.handleChangeTip})),n.a.createElement("td",{className:"firstField"},n.a.createElement("button",{onClick:this.handleTip},"Set")," ")))),n.a.createElement("div",{className:"d-flex flex-fill flex-column"},n.a.createElement("div",{className:"allTables flex-row d-flex"},Object.keys(this.state.groups).map(function(t,a){return n.a.createElement("div",null,n.a.createElement("table",{className:"droppable",onDragOver:function(t){return e.onDragOver(t)},onDrop:function(a){return e.onDrop(a,t)}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("h1",{className:"groupName"},e.state.groups[t].name)))),n.a.createElement("tbody",null,n.a.createElement("tr",null),e.state.groups[t].theirOrders?e.state.groups[t].theirOrders.map(function(e){return n.a.createElement("tr",null,n.a.createElement("td",null,e))}):"",void 0!==e.state.groups[t].totalCost?n.a.createElement("tr",{className:"totalBar"},n.a.createElement("td",null,"Total: $",(e.state.groups[t].totalCost+e.state.groups[t].totalCost.toFixed(2)/(e.state.totalReceiptCost-e.state.totalReceiptTax)*e.state.totalReceiptTax).toFixed(2)," (Tax: $",(e.state.groups[t].totalCost.toFixed(2)/(e.state.totalReceiptCost-e.state.totalReceiptTax)*e.state.totalReceiptTax).toFixed(2),")",n.a.createElement("br",null),"Total Tip: $",(e.state.groups[t].totalCost*(e.state.tipPercent/100)).toFixed(2))):"")))})))),n.a.createElement("div",null,n.a.createElement("table",{className:"topPageTable"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"receiptHead"},n.a.createElement("td",{className:"headText"},"Number of Users: ",Object.keys(this.state.groups).length-2))))))}}]),t}(r.Component),M=Object(d.f)(Y),$=(a(89),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"DeniedPage"},n.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},n.a.createElement("table",{className:"DeniedTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",{colSpan:1},n.a.createElement("h1",{className:"DeniedTitle"},"Access Denied")))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{colSpan:1,className:"DeniedDisplay"},"You have attempted to access a page that you do not have access to. Please log in and try again, make an account it's free and easy, go register.")),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:1},n.a.createElement(m.b,{className:"btn btn-danger",to:"/"},"Go to LogIn")))))))}}]),t}(r.Component)),z=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.me()}},{key:"render",value:function(){var e=this,t=this.props.isLoggedIn;console.log("RENDERING");var a=function(){return n.a.createElement(A,{logIn:e.props.logIn,isLoggedIn:e.props.isLoggedIn,error:e.props.error})};return n.a.createElement(m.a,null,n.a.createElement(d.c,null,n.a.createElement(d.a,{exact:!0,path:"/",render:a}),n.a.createElement(d.a,{exact:!0,path:"/login",render:a}),n.a.createElement(d.a,{exact:!0,path:"/register",render:function(){return n.a.createElement(H,{users:e.props.users,registerUser:e.props.registerUser,registerError:e.props.registerError,registerSuccess:e.props.registerSuccess})}}),t&&n.a.createElement(d.c,null,n.a.createElement(d.a,{exact:!0,path:"/home",render:function(){return n.a.createElement(U,{orders:e.props.orders,me:e.props.me,logOut:e.props.logOut,loggeduser:e.props.loggeduser,fetchReceiptData:e.props.fetchReceiptData,resetReceiptData:e.props.resetReceiptData,fetchOrdersData:e.props.fetchOrdersData,resetOrdersData:e.props.resetOrdersData,data:e.props.receiptdata})}}),n.a.createElement(d.a,{exact:!0,path:"/orders",render:function(){return n.a.createElement(M,{loggeduser:e.props.loggeduser,resetReceiptData:e.props.resetReceiptData,data:e.props.receiptdata})}})),n.a.createElement(d.a,{component:function(){return n.a.createElement($,null)}})))}}]),t}(r.Component),W=Object(h.b)(function(e){return{users:e.users,loggeduser:e.loggeduser,error:e.loggeduser.response,receiptdata:e.receiptdata,registerSuccess:e.users.success,registerError:e.users.response,isLoggedIn:!!e.loggeduser.id,orders:e.orders}},function(e){return{registerUser:function(t){return e(function(e){return function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.post("https://vpay-backend-auth.herokuapp.com/auth/signup",{username:e.username,firstName:e.firstName,lastName:e.lastName,password:e.password,phoneNumber:e.phoneNumber,email:e.email}).then(function(e){console.log(e),a(y({success:"User Successfully Registered!"}))}).catch(function(e){console.log(e.response),a(N(e))});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))},logIn:function(t){return e(function(e){return function(){var t=Object(f.a)(g.a.mark(function t(a){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e),t.next=4,v.a.post("https://vpay-backend-auth.herokuapp.com/auth/login",{username:e.username,password:e.password},{withCredentials:!0});case 4:r=t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",a({type:"ERROR",payload:t.t0}));case 10:try{console.log(r.data,"THIS IS OUR INITIAL DATA"),a(O(r.data))}catch(n){console.error(n)}case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}(t))},logOut:function(){return e(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.delete("https://vpay-backend-auth.herokuapp.com/auth/logout",{withCredentials:!0});case 3:t({type:"LOG_OUT"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}())},fetchReceiptData:function(t){return e((a=t,function(e){var t=new FormData;t.append("file",a),v.a.post("https://api.taggun.io/api/receipt/v1/verbose/file",t,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json",apikey:"e6d1b110bdf511e98bfadfb7eb1aa8b5"}}).then(function(t){e(function(e){return{type:"FETCH_RECEIPT_DATA",payload:e}}(t.data)),console.log(t.data)})}));var a},resetReceiptData:function(){return e(function(e){e({type:"RESET_RECEIPT_DATA",payload:{}})})},me:function(){return e(function(){var e=Object(f.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("auth"),e.next=4,v.a.get("https://vpay-backend-auth.herokuapp.com/auth/me",{withCredentials:!0});case 4:a=e.sent,t(O(a.data||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}())},fetchOrdersData:function(t){return e(function(e){return function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(w(e));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))},resetOrdersData:function(){return e(function(e){e({type:"RESET_ORDERS_DATA"})})}}})(z);var X=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(W,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.addEventListener("push",function(e){console.log("Push Notification received",e);var t={title:"New!",content:"Something new happened!"};e.data&&(t=JSON.parse(e.data.text()));var a={body:t.content,icon:"/src/icons/logo.png",badge:"/src/icons/logo.png"};e.waitUntil(window.registration.showNotification(t.title,a))});var V=a(19),J=a(47),Q=a(48),q=a(49),Z=Object(V.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_USER":case"REGISTER_ERROR":return t.payload;default:return e}},receiptdata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RECEIPT_DATA":case"RESET_RECEIPT_DATA":return t.payload;default:return e}},loggeduser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return t.payload;case"LOG_OUT":return{};case"ERROR":return t.payload;default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ORDERS_DATA":return t.payload;case"RESET_ORDERS_DATA":return[];default:return e}}}),K=Object(J.createLogger)({collapsed:!0}),ee=Object(q.composeWithDevTools)(Object(V.applyMiddleware)(Q.a,K)),te=Object(V.createStore)(Z,ee);o.a.render(n.a.createElement(m.a,null,n.a.createElement(h.a,{store:te},n.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[50,1,2]]]);
//# sourceMappingURL=main.dc34c28c.chunk.js.map